extends layout_main

block content
    container.col-md-12

        br
        h2 Les parcours disponibles
        br
        div
            p Pour plus d'informations sur les conséquences de ma modification d'un parcours,&nbsp;
                a(role='button', data-toggle='collapse', href='#info', aria-expanded='false', aria-controls='info') lisez-en plus
            #info.collapse
                .well
                    p Informations pour la création d'un parcour:
                        br
                        br
                        | Lorsque vous modifiez un parcour, ls balises et les questions ne sont pas affectées. Seul le parcours disparait.
                        | Si vous voulez supprimer les balises et les questions associées, vous devez le faire manuellement.

        hr
        if (ok != undefined)
            .alert.alert-success(role="alert") #{ok}
        if (msg != undefined)
            .alert.alert-info(role="alert") #{msg}
        if (err != undefined)
            .alert.alert-warning(role="alert") #{err}
        br
        div(class="input-group")
            span(class="input-group-addon") Filtre
            input(id="filter",type="text",class="form-control",placeholder="Choisir un nom de parcours")
        table(class="table table-hover table-bordered", id="tabParcours")
            thead
                tr
                    th #
                    th Nom
                    th Description
                    th Etat
                    th Actions
                    th Créateur
                    th Création
                    th Mise à jour

            tbody(class="searchable")
                each parcour in parcours
                    tr
                        td #{parcour.id}
                        td
                            a(href="/parcours/view/"+ parcour.id, class="nom") #{parcour.nom}
                        td #{parcour.description}

                        if (parcour.actif == 1)
                            td actif
                        else
                            td innactif
                        td
                            a(href="/parcours/view/"+ parcour.id) Détail
                            | &nbsp;-&nbsp;
                            a(href="/parcours/edit/"+ parcour.id) Editer
                        td #{parcour.User.username}
                        td #{parcour.createdAt}
                        td #{parcour.updatedAt}

      script(type="text/javascript").
          $('#filter').keyup(function () {
              var rex = new RegExp($(this).val(), 'i');
              $('.searchable tr').hide();
              $('.searchable tr').filter(function () {
                    return rex.test(this.children[1].textContent);
              }).show();

          })
